___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "categories": ["EXPERIMENTATION", "PERSONALIZATION"],
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Tweex",
  "brand": {
    "id": "brand_dummy",
    "displayName": "Tweex Technologies Limited",
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABmwSURBVHgB7d1frN91fcfxT2lrq1BaBVJsgW5sA4dLzcw0cbsz82K7YReQXcjMxJvBlrBkyTAMskyYiyb7A5nAElfm5MZoNtkyiMF4tbhkLBhqZIihs0ArlaqUWlNsbXe+B77taTnn93v//n+/n/fjcXMgaVro+f2+r+f5/P6tO72kAACpXFAAgHQEAAAkJAAAICEBAAAJCQAASEgAAEBCAgAAEhIAAJCQAACAhAQAACQkAAAgIQEAAAkJAABISAAAQEICAAASEgAAkJAAAICEBAAAJCQAACAhAQAACQkAAEhIAABAQgIAABISAACQkAAAgIQEAAAkJAAAICEBAAAJCQAASEgAAEBCAgAAEhIAAJCQAACAhAQAACQkAAAgIQEAAAkJAABISAAAQEICAAASEgAAkJAAAICEBAAAJCQAACAhAQAACQkAAEhIAABAQgIAABISAACQkAAAgIQEAAAkJAAAICEBAAAJCQAASEgAAEBCAgAAEhIAAJCQAACAhAQAACQkAAAgIQEAAAkJAABISAAAQEICAAASEgAAkJAAAICEBAAAJCQAACAhAQAACQkAAEhIAABAQgIAABISAACQkAAAgIQEAAAkJAAAICEBAAAJCQAASEgAAEBCAgAAEhIAAJCQAACAhAQAACQkAAAgIQEAAAkJAABISAAAQEICAAASEgAAkJAAAICEBAAAJCQAACAhAQAACQkAAEhIAABAQgIAABISAACQkAAAgIQEAAAkJAAAICEBAAAJCQAASEgAAEBCAgAAEhIAAJCQAACAhAQAACQkAAAgIQEA0AOvvHKqwDQJAICO++eHj5X3/cb3ynf3nywwLetOLykAdNJTe39a3vfr31v+5127NpTHH91efm7pK0zKCQBARzXj/6HfPnTm3/cvnQA0/+4kgGkQAIztwGsnys179y9/Babj1ZOnym1Pv1ge++9jy2N//mP/bQS8csThLZPxEABjWR7/p/aXg0tfd2zeWPbs3lV2btpYgPE1499EdfOT/wu3byqnjq1b89fu3v2W8tXHLi/btq4rMA4nAIxs5fg3Dh53EgCTGmX8G3uXft1v/tZL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\u003d"
  },
  "description": "Avoid the development bottlenecks of website management. Effortlessly manage design requests, and allow your colleagues or clients to publish changes live without coding.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "siteId",
    "displayName": "Site ID",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NUMBER"
      },
      {
        "type": "NON_EMPTY"
      }
    ],
    "help": "Your Site ID is found on the site settings page"
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const log = require('logToConsole');
const queryPermission = require('queryPermission');
const injectScript = require('injectScript');
const getUrl = require('getUrl');
const encode = require('encodeUriComponent');

// Get the current page URL
const url = getUrl();

// Read config and sanitize the input
const siteId = data.siteId;

// Build the script URL
const scriptUrl = 'https://cdn.tweex.app/embeds/' + encode(siteId) + '.js?u=' + encode(url);

// Check if current script being loaded is permitted
if (queryPermission('inject_script', scriptUrl)) {
  injectScript(scriptUrl, data.gtmOnSuccess, data.gtmOnFailure, scriptUrl);
} else {
  log("GTM-DEBUG :: tweex.app >> Current script src is not allowed in permissions configuration");
  data.gtmOnFailure();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://cdn.tweex.app/embeds/*.js?u\u003d*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_url",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urlParts",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "queriesAllowed",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 21/02/2023, 12:20:34


